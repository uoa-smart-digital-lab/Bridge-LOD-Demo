/**********************************************************************************************************************************************************
 * XRUX_VisualQuality
 * ------------------
 *
 * 2021-10-05
 *
 * Sets the visual quality on scene load.  A good object to put this on is the ENTRY gameobject.  Doesn't seem to work at any other time, so function can't
 * be called to adjust quality dynamically
 *
 * Roy Davies, Smart Digital Lab, University of Auckland.
 **********************************************************************************************************************************************************/

using System;
using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using UnityEngine.XR;

// ----------------------------------------------------------------------------------------------------------------------------------------------------------
// Public functions
// ----------------------------------------------------------------------------------------------------------------------------------------------------------
public interface _XRUX_VisualQuality
{
}
// ----------------------------------------------------------------------------------------------------------------------------------------------------------



// ----------------------------------------------------------------------------------------------------------------------------------------------------------
// Main class
// ----------------------------------------------------------------------------------------------------------------------------------------------------------
[AddComponentMenu("OpenXR UX/Tools/XRUX Visual Quality")]
public class XRUX_VisualQuality : MonoBehaviour, _XRUX_VisualQuality
{
    [Serializable]
    public enum VisualQuality {low, medium, normal, high, extra}

    // ------------------------------------------------------------------------------------------------------------------------------------------------------
    // Public variables
    // ------------------------------------------------------------------------------------------------------------------------------------------------------
    [Header("____________________________________________________________________________________________________")]
    [Header("Sets the VR scene visual quality on scene load.  Put onto an object in the scene, eg ENTRY.\n____________________________________________________________________________________________________")]
    [Header("SETTINGS")]

    [Header("Visual Quality - some complex environments benefit from a lower visual quality.")]
    public VisualQuality visualQuality = VisualQuality.normal;
    // ------------------------------------------------------------------------------------------------------------------------------------------------------



    // ------------------------------------------------------------------------------------------------------------------------------------------------------
    // Private variables
    // ------------------------------------------------------------------------------------------------------------------------------------------------------
    // ------------------------------------------------------------------------------------------------------------------------------------------------------



    // ------------------------------------------------------------------------------------------------------------------------------------------------------
    // Add the 'Quietly' variable and send on
    // ------------------------------------------------------------------------------------------------------------------------------------------------------
    void Awake()
    {
        XRSettings.eyeTextureResolutionScale = (int)visualQuality / 4.0f + 0.5f;
    }
    // ------------------------------------------------------------------------------------------------------------------------------------------------------
}
