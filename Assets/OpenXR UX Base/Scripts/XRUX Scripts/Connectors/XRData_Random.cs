/**********************************************************************************************************************************************************
 * XRData_Random
 * -------------
 *
 * 2021-09-01
 *
 * Creates a random number between a given range.
 *
 * Roy Davies, Smart Digital Lab, University of Auckland.
 **********************************************************************************************************************************************************/

using System.Collections;
using System.Collections.Generic;
using UnityEngine;

// ----------------------------------------------------------------------------------------------------------------------------------------------------------
// Public functions
// ----------------------------------------------------------------------------------------------------------------------------------------------------------
public interface _XRData_Random
{
    void Go();
}
// ----------------------------------------------------------------------------------------------------------------------------------------------------------



// ----------------------------------------------------------------------------------------------------------------------------------------------------------
// Main class
// ----------------------------------------------------------------------------------------------------------------------------------------------------------
[AddComponentMenu("OpenXR UX/Connectors/XRData Random")]
public class XRData_Random : MonoBehaviour, _XRData_Random
{
    // ------------------------------------------------------------------------------------------------------------------------------------------------------
    // Public variables
    // ------------------------------------------------------------------------------------------------------------------------------------------------------
    [Header("____________________________________________________________________________________________________")]
    [Header("Generates a random number between the minimum and maximum values.\n____________________________________________________________________________________________________")]
    [Header("INPUTS\n\n - Go() - Trigger to activate function.")]

    [Header("____________________________________________________________________________________________________")]
    [Header("SETTINGS")]
    [Header("Minimum and Maximum values")]
    public float minValue = 0.0f;
    public float maxValue = 10.0f;
    public bool sendOnStart = false;
    
    [Header("____________________________________________________________________________________________________")]
    [Header("OUTPUTS")]
    public UnityXRDataEvent onChange;

    // ------------------------------------------------------------------------------------------------------------------------------------------------------



    // ------------------------------------------------------------------------------------------------------------------------------------------------------
    // Private variables
    // ------------------------------------------------------------------------------------------------------------------------------------------------------
    private bool firstTime = true;
    // ------------------------------------------------------------------------------------------------------------------------------------------------------



    // ------------------------------------------------------------------------------------------------------------------------------------------------------
    // ------------------------------------------------------------------------------------------------------------------------------------------------------
    void Update()
    {
        if (firstTime)
        {
            firstTime = false;
            if (sendOnStart) Go();
        }
    }
    // ------------------------------------------------------------------------------------------------------------------------------------------------------


    // ------------------------------------------------------------------------------------------------------------------------------------------------------
    // Send a random number
    // ------------------------------------------------------------------------------------------------------------------------------------------------------
    public void Go()
    {
        float randomNumber = Random.Range(minValue, maxValue);
        if (onChange != null) onChange.Invoke(new XRData(randomNumber));
    }
    // ------------------------------------------------------------------------------------------------------------------------------------------------------
}
