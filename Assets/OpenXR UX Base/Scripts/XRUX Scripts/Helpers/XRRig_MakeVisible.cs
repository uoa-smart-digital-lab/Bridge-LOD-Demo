/******************************************************************************************************************************************************
 * XRRig_MakeVisible
 * -----------------
 *
 * 2021-08-25
 * 
 * Reacts to events and makes the gameobject the script is sitting on active or inactive.  This has the effect of making it visible or
 * invisible.
 * 
 * Roy Davies, Smart Digital Lab, University of Auckland.
 ******************************************************************************************************************************************************/

using System.Collections;
using System.Collections.Generic;
using UnityEngine;

// ----------------------------------------------------------------------------------------------------------------------------------------------------------
// Public functions
// ----------------------------------------------------------------------------------------------------------------------------------------------------------
public interface _XRRig_MakeVisible
{
}
// ----------------------------------------------------------------------------------------------------------------------------------------------------------



// ----------------------------------------------------------------------------------------------------------------------------------------------------------
// Main class
// ----------------------------------------------------------------------------------------------------------------------------------------------------------
public class XRRig_MakeVisible : MonoBehaviour, _XRRig_MakeVisible
{
    // ------------------------------------------------------------------------------------------------------------------------------------------------------
    // Public variables
    // ------------------------------------------------------------------------------------------------------------------------------------------------------
    [Header("____________________________________________________________________________________________________")]
    [Header("Make GameObject visible on given event and action\n____________________________________________________________________________________________________")]
    [Header("INPUTS")]
    [Header("Event to watch for")]
    public XRDeviceEventTypes eventToWatchFor;
    [Header("Action to watch for")]
    public XRDeviceActions actionToWatchFor;
    // ------------------------------------------------------------------------------------------------------------------------------------------------------



    // ------------------------------------------------------------------------------------------------------------------------------------------------------
    // Private variables
    // ------------------------------------------------------------------------------------------------------------------------------------------------------

    // ------------------------------------------------------------------------------------------------------------------------------------------------------



    // ------------------------------------------------------------------------------------------------------------------------------------------------------
    // Set up the variables ready for to go.
    // ------------------------------------------------------------------------------------------------------------------------------------------------------
    void Start()
    {
        // Listen for events coming from the XR Controllers and other devices
        if (XRRig.EventQueue != null) XRRig.EventQueue.AddListener(onButtonEvent);

        // Start with the object being inactive / invisible
        this.gameObject.SetActive(false);
    }
    // ------------------------------------------------------------------------------------------------------------------------------------------------------



    // ------------------------------------------------------------------------------------------------------------------------------------------------------
    // Make the object visible or invisible.
    // ------------------------------------------------------------------------------------------------------------------------------------------------------
    public void onButtonEvent(XREvent theEvent)
    {
        if ((theEvent.eventType == eventToWatchFor) && (theEvent.eventAction == actionToWatchFor))
        {
            this.gameObject.SetActive(theEvent.eventBool);
        }
    }
    // ------------------------------------------------------------------------------------------------------------------------------------------------------
}
